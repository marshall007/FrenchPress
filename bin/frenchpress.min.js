(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var CACHE, DOM, makeElem, requestAnimationFrame, update;

DOM = require("./lib/dom");

update = require("./lib/update");

makeElem = require("./lib/makeElem");

CACHE = null;

requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.oRequestAnimationFrame;

window.fp = {
  render: function(parent, element) {
    CACHE = element;
    parent.innerHTML = null;
    return parent.appendChild(makeElem(element));
  },
  element: function(_arg) {
    var init, render;
    init = _arg.init, render = _arg.render;
    return function(props) {
      var REDRAW, state;
      REDRAW = function() {
        var changes, nodes;
        nodes = render.bind(state, DOM, props)();
        changes = update(nodes, CACHE);
        requestAnimationFrame(function() {
          var change, _i, _len, _results;
          _results = [];
          for (_i = 0, _len = changes.length; _i < _len; _i++) {
            change = changes[_i];
            _results.push(change());
          }
          return _results;
        });
        return CACHE = nodes;
      };
      state = init != null ? init.bind({
        REDRAW: REDRAW
      })() || {} : {};
      props || (props = {});
      return render.bind(state, DOM, props)();
    };
  }
};



},{"./lib/dom":2,"./lib/makeElem":3,"./lib/update":4}],2:[function(require,module,exports){
var Node, nodes, tag, tags, _i, _len,
  __slice = [].slice;

tags = ["a", "abbr", "address", "area", "article", "aside", "audio", "b", "base", "bdi", "bdo", "big", "blockquote", "body", "br", "button", "canvas", "caption", "cite", "code", "col", "colgroup", "data", "datalist", "dd", "del", "details", "dfn", "div", "dl", "dt", "em", "embed", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "head", "header", "hr", "html", "i", "iframe", "img", "input", "ins", "kbd", "keygen", "label", "legend", "li", "link", "main", "map", "mark", "menu", "menuitem", "meta", "meter", "nav", "noscript", "object", "ol", "optgroup", "option", "output", "p", "param", "pre", "progress", "q", "rp", "rt", "ruby", "s", "samp", "script", "section", "select", "small", "source", "span", "strong", "style", "sub", "summary", "sup", "table", "tbody", "td", "textarea", "tfoot", "th", "thead", "time", "title", "tr", "track", "u", "ul", "var", "video", "wbr", "circle", "defs", "ellipse", "g", "line", "linearGradient", "mask", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "tspan", "injection", "text"];

Node = function(tag) {
  return function() {
    var args, attrs, i, node, nodes, result, _i, _len;
    args = arguments[0], nodes = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    if (args != null) {
      if (typeof args === "object" && !(args.fp || Array.isArray(args))) {
        attrs = args;
      } else {
        nodes.unshift(args);
      }
    }
    for (i = _i = 0, _len = nodes.length; _i < _len; i = ++_i) {
      node = nodes[i];
      if (node == null) {
        nodes.splice(i, 1);
      } else if (Array.isArray(node)) {
        nodes.splice.apply(nodes, [i, 1].concat(__slice.call(node)));
      }
    }
    result = {
      tag: tag,
      fp: true
    };
    if (attrs != null) {
      result.attrs = attrs;
    }
    if (nodes[0] != null) {
      result.nodes = nodes;
    }
    return result;
  };
};

nodes = {};

for (_i = 0, _len = tags.length; _i < _len; _i++) {
  tag = tags[_i];
  nodes[tag] = Node(tag);
}

nodes["mapTo"] = function(tag) {
  return function(data) {
    return nodes[tag](data);
  };
};

module.exports = nodes;



},{}],3:[function(require,module,exports){
var makeElem;

makeElem = function(node, depth) {
  var attr, attrs, child, elem, i, nodes, tag, value, _i, _len;
  if (depth == null) {
    depth = "0";
  }
  if (node.fp) {
    tag = node.tag, attrs = node.attrs, nodes = node.nodes;
    elem = document.createElement(tag);
    elem.setAttribute("fp-id", depth);
    for (attr in attrs) {
      value = attrs[attr];
      if (attr.slice(0, 2) === "on") {
        elem.addEventListener(attr.substring(2).toLowerCase(), value);
      } else if (attr === "innerHTML") {
        elem.innerHTML = value;
      } else {
        elem.setAttribute(attr, value);
      }
    }
    if (nodes != null) {
      for (i = _i = 0, _len = nodes.length; _i < _len; i = ++_i) {
        child = nodes[i];
        elem.appendChild(makeElem(child, "" + depth + "." + i));
      }
    }
  } else {
    elem = document.createTextNode("" + node);
  }
  return elem;
};

module.exports = makeElem;



},{}],4:[function(require,module,exports){
var getUpdates, makeElem,
  __slice = [].slice;

makeElem = require("./makeElem");

getUpdates = function(cur, old, depth) {
  var attr, changes, elem, event, getElem, getParent, getTextElem, i, value, _i, _ref, _ref1, _ref2;
  if (depth == null) {
    depth = "0";
  }
  getParent = function() {
    return document.querySelector("[fp-id='" + depth.slice(0, depth.lastIndexOf(".")) + "']");
  };
  getElem = function() {
    return document.querySelector("[fp-id='" + depth + "']");
  };
  getTextElem = function() {
    return getParent().childNodes[depth.substring(depth.lastIndexOf(".") + 1)];
  };
  changes = [];
  if ((cur != null) || (old != null)) {
    if (old == null) {
      changes.push(function() {
        return getParent().appendChild(makeElem(cur, depth));
      });
    } else if (cur == null) {
      changes.push(function() {
        var elem;
        elem = getElem();
        return elem.parentNode.removeChild(elem);
      });
    } else if (cur.fp && old.fp) {
      if (cur.tag !== old.tag) {
        changes.push(function() {
          var elem;
          elem = getElem();
          return elem.parentNode.replaceChild(makeElem(cur, depth), elem);
        });
      } else {
        _ref = cur.attrs;
        for (attr in _ref) {
          value = _ref[attr];
          if (((_ref1 = old.attrs[attr]) != null ? _ref1.toString() : void 0) !== value.toString()) {
            if (attr.slice(0, 2) === "on") {
              event = attr.substring(2).toLowerCase();
              changes.push(function() {
                var elem;
                elem = getElem();
                elem.removeEventListener(event, old.attrs[attr]);
                return elem.addEventListener(event, value);
              });
            } else if (attr === "innerHTML") {
              changes.push(function() {
                return getElem().innerHTML = value;
              });
            } else {
              changes.push(function() {
                return getElem().setAttribute(attr, value);
              });
            }
          }
        }
        for (attr in old.attrs) {
          if (cur.attrs[attr] == null) {
            if (attr.slice(0, 2) === "on") {
              event = attr.substring(2).toLowerCase();
              changes.push(function() {
                return getElem().removeEventListener(event, old.attrs[attr]);
              });
            } else if (attr === "innerHTML") {
              changes.push(function() {
                return getElem().innerHTML = "";
              });
            } else {
              changes.push(function() {
                return getElem().removeAttribute(attr);
              });
            }
          }
        }
        if ((cur.nodes != null) && (old.nodes != null)) {
          for (i = _i = 0, _ref2 = Math.max(cur.nodes.length, old.nodes.length); 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {
            changes.splice.apply(changes, [changes.length, 0].concat(__slice.call(getUpdates(cur.nodes[i], old.nodes[i], "" + depth + "." + i))));
          }
        } else if (old.nodes != null) {
          changes.push(function() {
            return getElem().innerHTML = "";
          });
        } else if (cur.nodes != null) {
          changes.push(function() {
            var child, _j, _len, _ref3, _results;
            _ref3 = cur.nodes;
            _results = [];
            for (i = _j = 0, _len = _ref3.length; _j < _len; i = ++_j) {
              child = _ref3[i];
              _results.push(getElem().appendChild(makeElem(child, "" + depth + "." + i)));
            }
            return _results;
          });
        }
      }
    } else if (cur.fp) {
      elem = getTextElem();
      changes.push(function() {
        return elem.parentNode.replaceChild(makeElem(cur, depth), elem);
      });
    } else if (cur.toString() !== old.toString()) {
      changes.push(function() {
        return getTextElem().textContent = "" + cur;
      });
    }
  }
  return changes;
};

module.exports = getUpdates;



},{"./makeElem":3}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcRHlsYW5cXEFwcERhdGFcXFJvYW1pbmdcXG5wbVxcbm9kZV9tb2R1bGVzXFxicm93c2VyaWZ5XFxub2RlX21vZHVsZXNcXGJyb3dzZXItcGFja1xcX3ByZWx1ZGUuanMiLCJFOlxcQ2xvdWRcXE90aGVyXFxGcmVuY2hQcmVzc1xcYnJvd3Nlci5saXRjb2ZmZWUiLCJFOlxcQ2xvdWRcXE90aGVyXFxGcmVuY2hQcmVzc1xcbGliXFxkb20ubGl0Y29mZmVlIiwiRTpcXENsb3VkXFxPdGhlclxcRnJlbmNoUHJlc3NcXGxpYlxcbWFrZUVsZW0ubGl0Y29mZmVlIiwiRTpcXENsb3VkXFxPdGhlclxcRnJlbmNoUHJlc3NcXGxpYlxcdXBkYXRlLmxpdGNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0tJLElBQUEsbURBQUE7O0FBQUEsR0FBQSxHQUFNLE9BQUEsQ0FBUSxXQUFSLENBQU4sQ0FBQTs7QUFBQSxNQUNBLEdBQVMsT0FBQSxDQUFRLGNBQVIsQ0FEVCxDQUFBOztBQUFBLFFBRUEsR0FBVyxPQUFBLENBQVEsZ0JBQVIsQ0FGWCxDQUFBOztBQUFBLEtBTUEsR0FBUSxJQU5SLENBQUE7O0FBQUEscUJBVUEsR0FBd0IsTUFBTSxDQUFDLHFCQUFQLElBQWdDLE1BQU0sQ0FBQyx3QkFBdkMsSUFBbUUsTUFBTSxDQUFDLDJCQUExRSxJQUF5RyxNQUFNLENBQUMsc0JBVnhJLENBQUE7O0FBQUEsTUFlTSxDQUFDLEVBQVAsR0FVSTtBQUFBLEVBQUEsTUFBQSxFQUFRLFNBQUMsTUFBRCxFQUFTLE9BQVQsR0FBQTtBQUNKLElBQUEsS0FBQSxHQUFRLE9BQVIsQ0FBQTtBQUFBLElBQ0EsTUFBTSxDQUFDLFNBQVAsR0FBbUIsSUFEbkIsQ0FBQTtXQUVBLE1BQU0sQ0FBQyxXQUFQLENBQW1CLFFBQUEsQ0FBUyxPQUFULENBQW5CLEVBSEk7RUFBQSxDQUFSO0FBQUEsRUFjQSxPQUFBLEVBQVMsU0FBQyxJQUFELEdBQUE7QUFBbUIsUUFB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LENBQW5CO1NBQUEsTUFHQSxJQUFHLGlCQUFIO0FBQ0QsVUFBQSxPQUFPLENBQUMsSUFBUixDQUFhLFNBQUEsR0FBQTtBQUFHLGdCQUFBLGdDQUFBO0FBQUE7QUFBQTtpQkFBQSxvREFBQTsrQkFBQTtBQUFBLDRCQUFBLE9BQUEsQ0FBQSxDQUFTLENBQUMsV0FBVixDQUFzQixRQUFBLENBQVMsS0FBVCxFQUFnQixFQUFBLEdBQUUsS0FBRixHQUFTLEdBQVQsR0FBVyxDQUEzQixDQUF0QixFQUFBLENBQUE7QUFBQTs0QkFBSDtVQUFBLENBQWIsQ0FBQSxDQURDO1NBakRUO09BSEM7S0FBQSxNQXlEQSxJQUFHLEdBQUcsQ0FBQyxFQUFQO0FBQ0QsTUFBQSxJQUFBLEdBQU8sV0FBQSxDQUFBLENBQVAsQ0FBQTtBQUFBLE1BQ0EsT0FBTyxDQUFDLElBQVIsQ0FBYSxTQUFBLEdBQUE7ZUFBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQWhCLENBQTZCLFFBQUEsQ0FBUyxHQUFULEVBQWMsS0FBZCxDQUE3QixFQUFtRCxJQUFuRCxFQUFIO01BQUEsQ0FBYixDQURBLENBREM7S0FBQSxNQUtBLElBQUcsR0FBRyxDQUFDLFFBQUosQ0FBQSxDQUFBLEtBQW9CLEdBQUcsQ0FBQyxRQUFKLENBQUEsQ0FBdkI7QUFBMkMsTUFBQSxPQUFPLENBQUMsSUFBUixDQUFhLFNBQUEsR0FBQTtlQUFHLFdBQUEsQ0FBQSxDQUFhLENBQUMsV0FBZCxHQUE0QixFQUFBLEdBQUUsSUFBakM7TUFBQSxDQUFiLENBQUEsQ0FBM0M7S0ExRVQ7R0FmQTtBQTJGQSxTQUFPLE9BQVAsQ0FqR1M7QUFBQSxDQVpiLENBQUE7O0FBQUEsTUFpSE0sQ0FBQyxPQUFQLEdBQWlCLFVBakhqQixDQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIiNGcmVuY2ggUHJlc3MgTWFpblxyXG5DcmVhdGVzIGdsb2JhbCBcImZwXCIgb2JqZWN0LlxyXG5cclxuIyNEZXBlbmRhbmNpZXNcclxuXHJcbiAgICBET00gPSByZXF1aXJlIFwiLi9saWIvZG9tXCJcclxuICAgIHVwZGF0ZSA9IHJlcXVpcmUgXCIuL2xpYi91cGRhdGVcIlxyXG4gICAgbWFrZUVsZW0gPSByZXF1aXJlIFwiLi9saWIvbWFrZUVsZW1cIlxyXG5cclxuIyMjI0NhY2hlIGZvciBwcmV2aW91cyBmcCBlbGVtZW50LlxyXG5cclxuICAgIENBQ0hFID0gbnVsbFxyXG5cclxuIyMjI0dldCByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcclxuXHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIG9yIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgb3Igd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSBvciB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZVxyXG5cclxuIyNFeHBvcnQgZnAgKEZyZW5jaCBQcmVzcykgT2JqZWN0XHJcblRoZSBlbnRyeSBwb2ludCB0byB0aGUgQVBJIGZvciBGcmVuY2ggUHJlc3MuXHJcblxyXG4gICAgd2luZG93LmZwID1cclxuXHJcbiMjQXR0YWNoIEVsZW1lbnQgdG8gRE9NXHJcblJlbmRlcnMgYSBGcmVuY2ggUHJlc3MgZWxlbWVudCB0byB0aGUgRE9NIGF0IGEgZ2l2ZW4gcGFyZW50IGVsZW1lbnQuXHJcblxyXG4qKlBBUkFNUyoqOlxyXG5cclxuKyBgcGFyZW50YDogVGhlIERPTSBlbGVtZW50L25vZGUgdG8gYXBwZW5kIHRoZSBmcCBlbGVtZW50IHRvLlxyXG4rIGBlbGVtZW50YDogVGhlIGZwIGVsZW1lbnQgdG8gYXR0YWNoIHRvIHRoZSBET00uXHJcblxyXG4gICAgICAgIHJlbmRlcjogKHBhcmVudCwgZWxlbWVudCktPlxyXG4gICAgICAgICAgICBDQUNIRSA9IGVsZW1lbnRcclxuICAgICAgICAgICAgcGFyZW50LmlubmVySFRNTCA9IG51bGxcclxuICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkIG1ha2VFbGVtIGVsZW1lbnRcclxuXHJcblxyXG4jI0NyZWF0ZSBhbiBGUCBFbGVtZW50XHJcbkNyZWF0ZXMgYSBGcmVuY2ggUHJlc3MgZWxlbWVudCB3aXRoIG9wdGlvbmFsIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uIGFuZCBhIHRlbXBsYXRlIHRvIHJlbmRlci5cclxuXHJcbioqUEFSQU1TKio6IEJvdGggcmVuZGVyIGFuZCBpbml0IGZ1bmN0aW9ucyBoYXZlIFJFRFJBVyBmdW5jdGlvbiBhdHRhY2hlZCB0byB0aGVtIHRvIHVwZGF0ZSB0aGUgdmlldy5cclxuXHJcbisgYGluaXRgOiBBIGZ1bmN0aW9uIHRoYXQgY2FuIGluaXRpYWxpemUgYW4gZnAgRWxlbWVudCBhbmQgY2FuIHJldHVybiBhbiBvYmplY3QgdG8gcmVwcmVzZW50IGl0cyBzdGF0ZS5cclxuKyBgcmVuZGVyYDogVGhlIGNvZmZlZS1zY3JpcHQgdGVtcGxhdGUgdG8gcmVuZGVyIGZvciB0aGUgZnAgRWxlbWVudC5cclxuXHJcbiAgICAgICAgZWxlbWVudDogKHtpbml0LCByZW5kZXJ9KS0+IChwcm9wcyktPlxyXG5cclxuIyMjI1JFRFJBVyBGdW5jdGlvblxyXG5BY2Nlc3NlZCBpbiBpbml0IGFuZCByZW5kZXIgdGhyb3VnaCB0aGVpciBzdGF0ZSAoQFJFRFJBVygpKS5cclxuVGhpcyBmdW5jdGlvbiB3aWxsIHN0YXJ0IGEgdmlydHVhbCBET00gdXBkYXRlLCBldmVudHVhbGx5IHVwZGF0aW5nIHRoZSBET00gYW5kIHRoZSBjYWNoZS5cclxuXHJcbiAgICAgICAgICAgIFJFRFJBVyA9IC0+XHJcbiAgICAgICAgICAgICAgICBub2RlcyA9IHJlbmRlci5iaW5kKHN0YXRlLCBET00sIHByb3BzKSgpXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzID0gdXBkYXRlIG5vZGVzLCBDQUNIRVxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIC0+IGRvIGNoYW5nZSBmb3IgY2hhbmdlIGluIGNoYW5nZXNcclxuICAgICAgICAgICAgICAgIENBQ0hFID0gbm9kZXNcclxuXHJcbiMjIyNJbml0aWFsaXplIHN0YXRlIGFuZCBwcm9wcyAoaWYgdW5zZXQpIGZvciB0aGUgZWxlbWVudC5cclxuXHJcbiAgICAgICAgICAgIHN0YXRlID0gaWYgaW5pdD8gdGhlbiBpbml0LmJpbmQoe1JFRFJBV30pKCkgb3Ige30gZWxzZSB7fVxyXG4gICAgICAgICAgICBwcm9wcyBvcj0ge31cclxuXHJcbiMjIyNSZXR1cm5zIHRoZSBpbml0aWFsIGZwIGVsZW1lbnQuXHJcblxyXG4gICAgICAgICAgICByZW5kZXIuYmluZChzdGF0ZSwgRE9NLCBwcm9wcykoKSIsIiNGcmVuY2ggUHJlc3MgRE9NIEdlbmVyYXRvclxyXG5UaGUgRE9NIGdlbmVyYXRvciBleHBvcnRzIHRoZSB2aXJ0dWFsIERPTSBmb3IgdXNlIGluIHRlbXBsYXRlcy5cclxuXHJcbiMjTGlzdCBvZiB2aXJ0dWFsIG5vZGVzIHRvIGdlbmVyYXRlOlxyXG5cclxuICAgIHRhZ3MgPSBbXHJcbiAgICAgICAgXCJhXCIsXCJhYmJyXCIsXCJhZGRyZXNzXCIsXCJhcmVhXCIsXCJhcnRpY2xlXCIsXCJhc2lkZVwiLFwiYXVkaW9cIixcImJcIixcImJhc2VcIixcImJkaVwiLFwiYmRvXCIsXCJiaWdcIixcImJsb2NrcXVvdGVcIixcImJvZHlcIixcImJyXCIsXHJcbiAgICAgICAgXCJidXR0b25cIixcImNhbnZhc1wiLFwiY2FwdGlvblwiLFwiY2l0ZVwiLFwiY29kZVwiLFwiY29sXCIsXCJjb2xncm91cFwiLFwiZGF0YVwiLFwiZGF0YWxpc3RcIixcImRkXCIsXCJkZWxcIixcImRldGFpbHNcIixcImRmblwiLFwiZGl2XCIsXHJcbiAgICAgICAgXCJkbFwiLFwiZHRcIixcImVtXCIsXCJlbWJlZFwiLFwiZmllbGRzZXRcIixcImZpZ2NhcHRpb25cIixcImZpZ3VyZVwiLFwiZm9vdGVyXCIsXCJmb3JtXCIsXCJoMVwiLFwiaDJcIixcImgzXCIsXCJoNFwiLFwiaDVcIixcImg2XCIsXCJoZWFkXCIsXHJcbiAgICAgICAgXCJoZWFkZXJcIixcImhyXCIsXCJodG1sXCIsXCJpXCIsXCJpZnJhbWVcIixcImltZ1wiLFwiaW5wdXRcIixcImluc1wiLFwia2JkXCIsXCJrZXlnZW5cIixcImxhYmVsXCIsXCJsZWdlbmRcIixcImxpXCIsXCJsaW5rXCIsXCJtYWluXCIsXCJtYXBcIixcclxuICAgICAgICBcIm1hcmtcIixcIm1lbnVcIixcIm1lbnVpdGVtXCIsXCJtZXRhXCIsXCJtZXRlclwiLFwibmF2XCIsXCJub3NjcmlwdFwiLFwib2JqZWN0XCIsXCJvbFwiLFwib3B0Z3JvdXBcIixcIm9wdGlvblwiLFwib3V0cHV0XCIsXCJwXCIsXCJwYXJhbVwiLFxyXG4gICAgICAgIFwicHJlXCIsXCJwcm9ncmVzc1wiLFwicVwiLFwicnBcIixcInJ0XCIsXCJydWJ5XCIsXCJzXCIsXCJzYW1wXCIsXCJzY3JpcHRcIixcInNlY3Rpb25cIixcInNlbGVjdFwiLFwic21hbGxcIixcInNvdXJjZVwiLFwic3BhblwiLFwic3Ryb25nXCIsXHJcbiAgICAgICAgXCJzdHlsZVwiLFwic3ViXCIsXCJzdW1tYXJ5XCIsXCJzdXBcIixcInRhYmxlXCIsXCJ0Ym9keVwiLFwidGRcIixcInRleHRhcmVhXCIsXCJ0Zm9vdFwiLFwidGhcIixcInRoZWFkXCIsXCJ0aW1lXCIsXCJ0aXRsZVwiLFwidHJcIixcInRyYWNrXCIsXHJcbiAgICAgICAgXCJ1XCIsXCJ1bFwiLFwidmFyXCIsXCJ2aWRlb1wiLFwid2JyXCIsXCJjaXJjbGVcIixcImRlZnNcIixcImVsbGlwc2VcIixcImdcIixcImxpbmVcIixcImxpbmVhckdyYWRpZW50XCIsXCJtYXNrXCIsXCJwYXRoXCIsXCJwYXR0ZXJuXCIsXHJcbiAgICAgICAgXCJwb2x5Z29uXCIsXCJwb2x5bGluZVwiLFwicmFkaWFsR3JhZGllbnRcIixcInJlY3RcIixcInN0b3BcIixcInN2Z1wiLFwidHNwYW5cIixcImluamVjdGlvblwiLCBcInRleHRcIlxyXG4gICAgXVxyXG5cclxuIyNNYWtlIFZpcnR1YWwgRE9NIE5vZGVcclxuQ3JlYXRlcyBhIHZpcnR1YWwgbm9kZSwgcmVjdXJzaXZlbHkgYWRkaW5nIGFsbCBjaGlsZCBub2Rlcy5cclxuXHJcbioqUEFSQU1TKio6IHRhZ05hbWUgaXMgdXNlZCBkdXJpbmcgaW5pdGlhbCBnZW5lcmF0aW9uIG9mIHRoZSB2aXJ0dWFsIERPTSBvdGhlciBwYXJhbXMgYXJlIGN1cnJpZWQgYW5kIHVzZWQgaW4gdGVtcGxhdGVzLlxyXG5cclxuKyBgdGFnTmFtZWA6IFRoZSB0YWdOYW1lIGZvciB0aGUgZ2VuZXJhdGVkIG5vZGUuXHJcbisgYGFyZ3NgOiBBdHRyaWJ1dGVzIGZvciB0aGUgbm9kZS4gKElmIG5vdCBhbiBvYmplY3QgYXJnIHdpbGwgYmUgYWRkZWQgdG8gY2hpbGRyZW4pXHJcbisgYGNoaWxkcmVuYDogQ2hpbGQgbm9kZXMgZm9yIHRoZSBjdXJyZW50IG5vZGUuXHJcblxyXG4qKlJFVFVSTlMqKjogVmlydHVhbCBET00gbm9kZSB3aXRoIGFsbCBuZXN0ZWQgY2hpbGRyZW4uXHJcblxyXG4gICAgTm9kZSA9ICh0YWcpLT4gKGFyZ3MsIG5vZGVzLi4uKS0+XHJcbiAgICAgICAgaWYgYXJncz9cclxuICAgICAgICAgICAgaWYgdHlwZW9mIGFyZ3MgaXMgXCJvYmplY3RcIiBhbmQgbm90IChhcmdzLmZwIG9yIEFycmF5LmlzQXJyYXkgYXJncykgdGhlbiBhdHRycyA9IGFyZ3NcclxuICAgICAgICAgICAgZWxzZSBub2Rlcy51bnNoaWZ0IGFyZ3NcclxuXHJcbiAgICAgICAgZm9yIG5vZGUsIGkgaW4gbm9kZXNcclxuICAgICAgICAgICAgdW5sZXNzIG5vZGU/IHRoZW4gbm9kZXMuc3BsaWNlIGksIDFcclxuICAgICAgICAgICAgZWxzZSBpZiBBcnJheS5pc0FycmF5IG5vZGUgdGhlbiBub2Rlcy5zcGxpY2UgaSwgMSwgbm9kZS4uLlxyXG5cclxuICAgICAgICByZXN1bHQgPSB7dGFnLCBmcDogeWVzfVxyXG4gICAgICAgIGlmIGF0dHJzPyB0aGVuIHJlc3VsdC5hdHRycyA9IGF0dHJzXHJcbiAgICAgICAgaWYgbm9kZXNbMF0/IHRoZW4gcmVzdWx0Lm5vZGVzID0gbm9kZXNcclxuICAgICAgICByZXN1bHRcclxuXHJcbiMjRXhwb3J0czogVmlydHVhbCBET01cclxuXHJcbiAgICBub2RlcyA9IHt9XHJcbiAgICBub2Rlc1t0YWddID0gTm9kZSB0YWcgZm9yIHRhZyBpbiB0YWdzXHJcbiAgICBub2Rlc1tcIm1hcFRvXCJdID0gKHRhZyktPiAoZGF0YSktPlxyXG4gICAgICAgIG5vZGVzW3RhZ10oZGF0YSlcclxuXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IG5vZGVzIiwiI01ha2UgRE9NIEVsZW1lbnRcclxuQ3JlYXRlcyBhIERPTSBlbGVtZW50IGFuZCBjaGlsZCBub2RlcyBiYXNlZCBvbiBhIHZpcnR1YWwgbm9kZS5cclxuQWRkcyBhbGwgdmlydHVhbCBub2RlIGF0dHJpYnV0ZXMgdG8gRE9NIG5vZGUgZXhjZXB0IHdoZW4gYXR0cmlidXRlIGlzIGFuIGV2ZW50IGxpc3Rlci5cclxuXHJcbioqUEFSQU1TKio6XHJcblxyXG4rIGBub2RlYDogVGhlIG5vZGUgdG8gYmVnaW4gcmVuZGVyaW5nLiAoUmVuZGVycyBvdGhlciBub2RlcyByZWN1cnNpdmVseSlcclxuKyBgZGVwdGhgOiBUaGUgZGVwdGggaWRlbnRpZmllciB1c2VkIHRvIGZpbmQgdGhlIGVsZW1lbnQgZHVyaW5nIHVwZGF0ZXMuXHJcblxyXG4qKlJFVFVSTlMqKjogRE9NIG5vZGUgd2l0aCBhbGwgY2hpbGQgbm9kZXMgYXBwZW5kZWQuXHJcblxyXG4gICAgbWFrZUVsZW0gPSAobm9kZSwgZGVwdGggPSBcIjBcIiktPlxyXG4gICAgICAgIGlmIG5vZGUuZnBcclxuICAgICAgICAgICAge3RhZywgYXR0cnMsIG5vZGVzfSA9IG5vZGVcclxuICAgICAgICAgICAgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgdGFnXHJcbiAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlIFwiZnAtaWRcIiwgZGVwdGhcclxuICAgICAgICAgICAgZm9yIGF0dHIsIHZhbHVlIG9mIGF0dHJzXHJcbiAgICAgICAgICAgICAgICBpZiBhdHRyWzAuLjFdIGlzIFwib25cIiB0aGVuIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciBhdHRyLnN1YnN0cmluZygyKS50b0xvd2VyQ2FzZSgpLCB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiBhdHRyIGlzIFwiaW5uZXJIVE1MXCIgdGhlbiBlbGVtLmlubmVySFRNTCA9IHZhbHVlXHJcbiAgICAgICAgICAgICAgICBlbHNlIGVsZW0uc2V0QXR0cmlidXRlIGF0dHIsIHZhbHVlXHJcbiAgICAgICAgICAgIGlmIG5vZGVzPyB0aGVuIGVsZW0uYXBwZW5kQ2hpbGQgbWFrZUVsZW0gY2hpbGQsIFwiI3tkZXB0aH0uI3tpfVwiIGZvciBjaGlsZCwgaSBpbiBub2Rlc1xyXG5cclxuICAgICAgICBlbHNlIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSBcIiN7bm9kZX1cIlxyXG4gICAgICAgIHJldHVybiBlbGVtXHJcblxyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtYWtlRWxlbSIsIiNGcmVuY2ggUHJlc3MgVXBkYXRlL0RpZmZpbmcgQWxnb3JpdGhtXHJcblxyXG4jI0RlcGVuZGFuY2llc1xyXG5cclxuICAgIG1ha2VFbGVtID0gcmVxdWlyZSBcIi4vbWFrZUVsZW1cIlxyXG5cclxuIyNVcGRhdGUgRnVuY3Rpb25cclxuXHJcbioqUEFSQU1TKio6XHJcblxyXG4rIGBjdXJgOiBOb2RlIGZyb20gcmVjZW50bHkgcmVuZGVyZWQgdGVtcGxhdGUuXHJcbisgYG9sZGA6IE5vZGUgZnJvbSBwcmV2aW91c2x5IHJlbmRlcmVkIHRlbXBsYXRlLlxyXG4rIGBkZXB0aGA6IEN1cnJlbnQgZGVwdGggb2YgdGhlIHVwZGF0ZSBhbGdvcml0aG0gKFVzZWQgdG8gZmluZCBET00gRWxlbWVudCkuXHJcblxyXG4qKlJFVFVSTlMqKjogRnVuY3Rpb24gcGFja2FnZWQgRE9NIHVwZGF0ZXMgdG8gYmUgaW52b2tlZCBsYXRlci5cclxuXHJcbiAgICBnZXRVcGRhdGVzID0gKGN1ciwgb2xkLCBkZXB0aCA9IFwiMFwiKS0+XHJcblxyXG4jIyMjSGVscGVyIEZ1bmN0aW9uczpcclxuXHJcbkdldHMgcGFyZW50IGVsZW1lbnQgaW4gRE9NIGJhc2VkIG9uIGN1cnJlbnQgZGVwdGggYnkgcmVtb3ZpbmcgbGFzdCBpbmRleC5cclxuXHJcbiAgICAgICAgZ2V0UGFyZW50ID0gLT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvciBcIltmcC1pZD0nI3tkZXB0aFswLi4uZGVwdGgubGFzdEluZGV4T2YgXCIuXCJdfSddXCJcclxuXHJcbkdldHMgdGhlIGN1cnJlbnQgZWxlbWVudCBpbiB0aGUgRE9NIGJhc2VkIG9uIGRlcHRoLlxyXG5cclxuICAgICAgICBnZXRFbGVtID0gLT4gZG9jdW1lbnQucXVlcnlTZWxlY3RvciBcIltmcC1pZD0nI3tkZXB0aH0nXVwiXHJcblxyXG5HZXRzIGEgdGV4dE5vZGUgaW4gRE9NIGJhc2VkIG9uIGRlcHRoLlxyXG5cclxuICAgICAgICBnZXRUZXh0RWxlbSA9IC0+IGdldFBhcmVudCgpLmNoaWxkTm9kZXNbZGVwdGguc3Vic3RyaW5nKGRlcHRoLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpXVxyXG5cclxuIyMjI0JlZ2luIFVwZGF0ZSBBbGdvcml0aG06XHJcblxyXG4gICAgICAgIGNoYW5nZXMgPSBbXVxyXG5cclxuICAgICAgICAjTXVzdCBiZSBhdCBsZWFzdCBvbmUgdmlydHVhbCBub2RlIHRvIGNhbGN1bGF0ZSB1cGRhdGUuXHJcbiAgICAgICAgaWYgY3VyPyBvciBvbGQ/XHJcblxyXG4gICAgICAgICAgICAjTm8gb2xkIG5vZGU6IGFwcGVuZCBjdXIgbm9kZSB0byBwYXJlbnQgZWxlbWVudC5cclxuICAgICAgICAgICAgdW5sZXNzIG9sZD8gdGhlbiBjaGFuZ2VzLnB1c2ggLT4gZ2V0UGFyZW50KCkuYXBwZW5kQ2hpbGQgbWFrZUVsZW0gY3VyLCBkZXB0aFxyXG5cclxuICAgICAgICAgICAgI05vIGN1ciBlbGVtZW50OiByZW1vdmUgcHJldmlvdXMgZWxlbWVudC5cclxuICAgICAgICAgICAgZWxzZSB1bmxlc3MgY3VyP1xyXG4gICAgICAgICAgICAgICAgY2hhbmdlcy5wdXNoIC0+XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbSA9IGdldEVsZW0oKVxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCBlbGVtXHJcblxyXG4gICAgICAgICAgICAjU3RhcnQgY29tcGFyaXNvbiBvZiB0d28gbm9kZXMuXHJcbiAgICAgICAgICAgIGVsc2UgaWYgY3VyLmZwIGFuZCBvbGQuZnBcclxuXHJcbiAgICAgICAgICAgICAgICAjVGFnIG5hbWUgY2hhbmdlZCwgcmVwbGFjZSBvbGQgbm9kZSB3aXRoIGN1ciBub2RlLlxyXG4gICAgICAgICAgICAgICAgaWYgY3VyLnRhZyBpc250IG9sZC50YWdcclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2ggLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbSA9IGdldEVsZW0oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkIG1ha2VFbGVtKGN1ciwgZGVwdGgpLCBlbGVtXHJcblxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjU2NhbiBjdXIgbm9kZSBmb3IgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCBmcm9tIG9sZCBub2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciBhdHRyLCB2YWx1ZSBvZiBjdXIuYXR0cnMgd2hlbiBvbGQuYXR0cnNbYXR0cl0/LnRvU3RyaW5nKCkgaXNudCB2YWx1ZS50b1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjSWYgYXR0ciBpcyBldmVudCAoc3RhcnRzIHdpdGggb24pOiByZW1vdmUgb2xkIGV2ZW50LCBhZGQgbmV3IGV2ZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyWzAuLjFdIGlzIFwib25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBhdHRyLnN1YnN0cmluZygyKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2ggLT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtID0gZ2V0RWxlbSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyIGV2ZW50LCBvbGQuYXR0cnNbYXR0cl1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgZXZlbnQsIHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjSWYgYXR0ciBpcyBpbm5lckhUTUw6IFNldCBpbm5lckhUTUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBhdHRyIGlzIFwiaW5uZXJIVE1MXCIgdGhlbiBjaGFuZ2VzLnB1c2ggLT4gZ2V0RWxlbSgpLmlubmVySFRNTCA9IHZhbHVlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjT3RoZXJ3aXNlIGNoYW5nZSB0aGUgYXR0ci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBjaGFuZ2VzLnB1c2ggLT4gZ2V0RWxlbSgpLnNldEF0dHJpYnV0ZSBhdHRyLCB2YWx1ZVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjU2NhbiBvbGQgbm9kZSBmb3IgYXR0cmlidXRlcyB0aGF0IGhhdmUgYmVlbiByZW1vdmVkIGluIGN1ciBub2RlLlxyXG4gICAgICAgICAgICAgICAgICAgIGZvciBhdHRyIG9mIG9sZC5hdHRycyB3aGVuIG5vdCBjdXIuYXR0cnNbYXR0cl0/XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjSWYgYXR0ciBpcyBldmVudCAoc3RhcnRzIHdpdGggb24pOiByZW1vdmUgb2xkIGV2ZW50LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiBhdHRyWzAuLjFdIGlzIFwib25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQgPSBhdHRyLnN1YnN0cmluZygyKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2ggLT4gZ2V0RWxlbSgpLnJlbW92ZUV2ZW50TGlzdGVuZXIgZXZlbnQsIG9sZC5hdHRyc1thdHRyXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgI0lmIGF0dHIgaXMgaW5uZXJIVE1MOiByZW1vdmUgaW5uZXJIVE1MXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgYXR0ciBpcyBcImlubmVySFRNTFwiIHRoZW4gY2hhbmdlcy5wdXNoIC0+IGdldEVsZW0oKS5pbm5lckhUTUwgPSBcIlwiXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAjT3RoZXJ3aXNlIHJlbW92ZSB0aGUgYXR0cmlidXRlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGNoYW5nZXMucHVzaCAtPiBnZXRFbGVtKCkucmVtb3ZlQXR0cmlidXRlIGF0dHJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgI0lmIGJvdGggZWxlbWVudHMgaGF2ZSBjaGlsZHJlbiB0aGVuIHdlIG11c3QgZGlmZiB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIGN1ci5ub2Rlcz8gYW5kIG9sZC5ub2Rlcz9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGkgaW4gWzAuLi5NYXRoLm1heCBjdXIubm9kZXMubGVuZ3RoLCBvbGQubm9kZXMubGVuZ3RoXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5zcGxpY2UgY2hhbmdlcy5sZW5ndGgsIDAsIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRVcGRhdGVzIGN1ci5ub2Rlc1tpXSwgb2xkLm5vZGVzW2ldLCBcIiN7ZGVwdGh9LiN7aX1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS4uLlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAjSWYgb2xkIG5vZGUgaGFzIGNoaWxkcmVuIGFuZCBjdXIgbm9kZSBkb2Vzbid0OiBSZW1vdmUgYWxsIG9sZCBub2RlcyBjaGlsZHJlbi5cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIG9sZC5ub2Rlcz8gdGhlbiBjaGFuZ2VzLnB1c2ggLT4gZ2V0RWxlbSgpLmlubmVySFRNTCA9IFwiXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgI0lmIGN1ciBub2RlIGhhcyBjaGlsZHJlbiBhbmQgb2xkIG5vZGUgZG9lc24ndDogQWRkIGFsbCBjdXIgbm9kZXMgY2hpbGRyZW4uXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBjdXIubm9kZXM/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXMucHVzaCAtPiBnZXRFbGVtKCkuYXBwZW5kQ2hpbGQgbWFrZUVsZW0gY2hpbGQsIFwiI3tkZXB0aH0uI3tpfVwiIGZvciBjaGlsZCwgaSBpbiBjdXIubm9kZXNcclxuXHJcblxyXG4gICAgICAgICAgICAjV2hlbiBvbGQgbm9kZSBpcyB0ZXh0Tm9kZSBhbmQgY3VyIG5vZGUgaXNuJ3Q6IFJlYnVpbGQgbm9kZS5cclxuICAgICAgICAgICAgZWxzZSBpZiBjdXIuZnBcclxuICAgICAgICAgICAgICAgIGVsZW0gPSBnZXRUZXh0RWxlbSgpXHJcbiAgICAgICAgICAgICAgICBjaGFuZ2VzLnB1c2ggLT4gZWxlbS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZCBtYWtlRWxlbShjdXIsIGRlcHRoKSwgZWxlbVxyXG5cclxuICAgICAgICAgICAgI0lmIG5vZGVzIGFyZSB0ZXh0Tm9kZXMgYW5kIGFyZSBkaWZmZXJlbnQ6IFJlcGxhY2Ugb2xkIG5vZGUgdGV4dCB3aXRoIGN1ciBub2RlIHRleHQuXHJcbiAgICAgICAgICAgIGVsc2UgaWYgY3VyLnRvU3RyaW5nKCkgaXNudCBvbGQudG9TdHJpbmcoKSB0aGVuIGNoYW5nZXMucHVzaCAtPiBnZXRUZXh0RWxlbSgpLnRleHRDb250ZW50ID0gXCIje2N1cn1cIlxyXG5cclxuICAgICAgICByZXR1cm4gY2hhbmdlc1xyXG5cclxuIyNFeHBvcnRzOiBET00gVXBkYXRlIEZ1bmN0aW9uXHJcblxyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnZXRVcGRhdGVzIl19
